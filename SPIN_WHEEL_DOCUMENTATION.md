# ูุธุงู ุนุฌูุฉ ุงูุญุธ (Spin to Win) - soapy bubbles

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุนุฌูุฉ ุงูุญุธ (Spin to Win) ูู ููุฒุฉ ุชูุงุนููุฉ ุชุชูุญ ูููุณุชุฎุฏููู ุงูุญุตูู ุนูู ุฃููุงุฏ ุฎุตู ูู ุฎูุงู ุชุฏููุฑ ุนุฌูุฉ ุงูุญุธ. ุงููุธุงู ูุตูู ููููู ุขููุงู ุชูุงูุงู ุญูุซ ูุชู ุชุญุฏูุฏ ุงููุชูุฌุฉ ุนูู ุงูู Backend ูููุน ุฃู ูุญุงููุงุช ุชูุงุนุจ.

## ๐๏ธ ูููู ุงููุธุงู

### ุงูุฌุฏุงูู

#### 1. ุฌุฏูู ุนูุงุตุฑ ุนุฌูุฉ ุงูุญุธ (`spin_wheel_items`)

```sql
- id: ูุนุฑู ูุฑูุฏ
- text: ุงููุต ุงููุนุฑูุถ ุนูู ุงูุนุฌูุฉ (ูุซู "10% OFF", "Free Shipping")
- discount_code: ููุฏ ุงูุฎุตู ุงููุฑุชุจุท (ูููู ุฃู ูููู null ููุนูุงุตุฑ ุจุฏูู ุฎุตู)
- probability: ูุณุจุฉ ุงูุญุธ (0-100) - ุชุญุฏุฏ ุงุญุชูุงููุฉ ุงูููุฒ ุจูุฐุง ุงูุนูุตุฑ
- order: ุชุฑุชูุจ ุงูุนูุตุฑ ูู ุงูุนุฌูุฉ
- is_active: ุญุงูุฉ ุงูุชูุนูู (true/false)
- description: ูุตู ุฅุถุงูู ููุนูุตุฑ
- created_at, updated_at: ุชูุงุฑูุฎ ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ
```

#### 2. ุฌุฏูู ูุชุงุฆุฌ ุนุฌูุฉ ุงูุญุธ (`spin_wheel_results`)

```sql
- id: ูุนุฑู ูุฑูุฏ
- spin_wheel_item_id: ูุนุฑู ุงูุนูุตุฑ ุงูุฐู ูุงุฒ ุจู ุงููุณุชุฎุฏู (FK)
- user_name: ุงุณู ุงููุณุชุฎุฏู
- user_phone: ุฑูู ูุงุชู ุงููุณุชุฎุฏู
- discount_code: ููุฏ ุงูุฎุตู ุงูุฐู ูุงุฒ ุจู (ูุณุฎุฉ ูุญููุธุฉ)
- text: ุงููุต ุงูุฐู ุธูุฑ (ูุณุฎุฉ ูุญููุธุฉ)
- created_at, updated_at: ุชูุงุฑูุฎ ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ
```

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ูููุณุชุฎุฏููู (Public APIs)

1. **ุฌูุจ ุนูุงุตุฑ ุงูุนุฌูุฉ ุงููุดุทุฉ**
   - `GET /api/v1/spin-wheel/items`
   - ูุนูุฏ ุฌููุน ุงูุนูุงุตุฑ ุงููุดุทุฉ ูุฑุชุจุฉ ุญุณุจ ุงูุชุฑุชูุจ

2. **ุชูููุฐ ุงูุฏูุฑุงู (Spin)**
   - `POST /api/v1/spin-wheel/spin`
   - Body: `{ "user_name": "ุงุณู ุงููุณุชุฎุฏู", "user_phone": "ุฑูู ุงููุงุชู" }`
   - **ุงููุชูุฌุฉ ูุชู ุชุญุฏูุฏูุง ุนูู ุงูู Backend** ุจูุงุกู ุนูู ูุณุจุฉ ุงูุญุธ
   - ูุชู ุญูุธ ุงูุณุฌู ุชููุงุฆูุงู
   - Response: `{ "success": true, "item": {...}, "result_id": 123 }`

### ููุฃุฏูู (Admin APIs)

1. **ุฅุฏุงุฑุฉ ุงูุนูุงุตุฑ**
   - `GET /api/v1/admin/spin-wheel/items` - ูุงุฆูุฉ ุงูุนูุงุตุฑ
   - `POST /api/v1/admin/spin-wheel/items` - ุฅูุดุงุก ุนูุตุฑ ุฌุฏูุฏ
   - `GET /api/v1/admin/spin-wheel/items/{id}` - ุชูุงุตูู ุนูุตุฑ
   - `PUT /api/v1/admin/spin-wheel/items/{id}` - ุชุญุฏูุซ ุนูุตุฑ
   - `DELETE /api/v1/admin/spin-wheel/items/{id}` - ุญุฐู ุนูุตุฑ

2. **ุนุฑุถ ุงูุณุฌูุงุช**
   - `GET /api/v1/admin/spin-wheel/results` - ูุงุฆูุฉ ุงูุณุฌูุงุช
   - Query Parameters:
     - `search`: ุงูุจุญุซ ุจุงูุงุณูุ ุงููุงุชูุ ุฃู ููุฏ ุงูุฎุตู
     - `date_from`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
     - `date_to`: ุชุงุฑูุฎ ุงูููุงูุฉ
     - `sort_by`: ุญูู ุงูุชุฑุชูุจ (ุงูุชุฑุงุถู: created_at)
     - `sort_direction`: ุงุชุฌุงู ุงูุชุฑุชูุจ (ุงูุชุฑุงุถู: desc)
     - `per_page`: ุนุฏุฏ ุงููุชุงุฆุฌ ูู ุงูุตูุญุฉ (ุงูุชุฑุงุถู: 50)

3. **ุงูุฅุญุตุงุฆูุงุช**
   - `GET /api/v1/admin/spin-wheel/statistics`
   - ูุนูุฏ:
     - `total_spins`: ุฅุฌูุงูู ุนุฏุฏ ุงูุฏูุฑุงุช
     - `total_items`: ุฅุฌูุงูู ุนุฏุฏ ุงูุนูุงุตุฑ
     - `active_items`: ุนุฏุฏ ุงูุนูุงุตุฑ ุงููุดุทุฉ
     - `results_per_item`: ุนุฏุฏ ุงููุชุงุฆุฌ ููู ุนูุตุฑ

## ๐ ุงูุฃูุงู

### ููุน ุงูุชูุงุนุจ

1. **ุงููุชูุฌุฉ ุนูู ุงูู Backend**: ูุชู ุชุญุฏูุฏ ุงููุชูุฌุฉ ุนูู ุงูู Backend ุจูุงุกู ุนูู ูุณุจุฉ ุงูุญุธุ ูููุณ ุนูู ุงูู Frontend
2. **ุญูุธ ุงูุณุฌูุงุช**: ูุชู ุญูุธ ูู ูุชูุฌุฉ ูุน ุงุณู ุงููุณุชุฎุฏู ูุฑูู ุงููุงุชู
3. **ุงูุชุญูู ูู ุงูุตุญุฉ**: ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุชูููุฐ ุงูุฏูุฑุงู

### ููุทู ุงุฎุชูุงุฑ ุงููุชูุฌุฉ

```php
// ูู SpinWheelService::performSpin()

1. ุฌูุจ ุฌููุน ุงูุนูุงุตุฑ ุงููุดุทุฉ
2. ุญุณุงุจ ุฅุฌูุงูู ูุณุจุฉ ุงูุญุธ
3. ุฅุฐุง ูุงูุช ุงููุณุจุฉ 0 ุฃู ุฃูู: ุงุฎุชูุงุฑ ุนุดูุงุฆู
4. ุฅุฐุง ูุงูุช ุงููุณุจุฉ ุฃูุจุฑ ูู 0:
   - ุชูููุฏ ุฑูู ุนุดูุงุฆู ุจูู 0 ูุฅุฌูุงูู ุงููุณุจุฉ
   - ุงุฎุชูุงุฑ ุงูุนูุตุฑ ุจูุงุกู ุนูู ุงููุณุจุฉ ุงูุชุฑุงูููุฉ
5. ุญูุธ ุงููุชูุฌุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
6. ุฅุฑุฌุงุน ุงููุชูุฌุฉ ูููุณุชุฎุฏู
```

## ๐ ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู

### ุฅูุดุงุก ุนูุตุฑ ุฌุฏูุฏ (Admin)

```json
POST /api/v1/admin/spin-wheel/items
{
  "text": "10% OFF",
  "discount_code": "SPIN10",
  "probability": 30.5,
  "order": 1,
  "is_active": true,
  "description": "ุฎุตู 10% ุนูู ุฌููุน ุงูููุชุฌุงุช"
}
```

### ุชูููุฐ ุงูุฏูุฑุงู (User)

```json
POST /api/v1/spin-wheel/spin
{
  "user_name": "ุฃุญูุฏ ูุญูุฏ",
  "user_phone": "1234567890"
}
```

**Response:**
```json
{
  "success": true,
  "item": {
    "id": 1,
    "text": "10% OFF",
    "discount_code": "SPIN10",
    "description": "ุฎุตู 10% ุนูู ุฌููุน ุงูููุชุฌุงุช"
  },
  "result_id": 123
}
```

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุชุทูุจุงุช Frontend

1. **ูููุฐุฌ ุงูุฅุฏุฎุงู**:
   - ุญูู ุงุณู ุงููุณุชุฎุฏู
   - ุญูู ุฑูู ุงููุงุชู
   - ุฒุฑ "ุฌุฑุจ ุญุธู" ุฃู "Spin"

2. **ุนุฌูุฉ ุงูุญุธ**:
   - ุนุฑุถ ุฌููุน ุงูุนูุงุตุฑ ุงููุดุทุฉ
   - ุชุฃุซูุฑ ุฏูุฑุงู ุนูุฏ ุงูุถุบุท
   - ุฅููุงู ุนูู ุงูุนูุตุฑ ุงููุงุฆุฒ

3. **ุนุฑุถ ุงููุชูุฌุฉ**:
   - ุนุฑุถ ุงููุต ุงููุงุฆุฒ
   - ุนุฑุถ ููุฏ ุงูุฎุตู (ุฅู ูุฌุฏ)
   - ุฒุฑ ูุณุฎ ุงูููุฏ
   - ุฒุฑ "ูุชุงุจุนุฉ ุงูุชุณูู"

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุณุจุฉ ุงูุญุธ**: ูุฌุจ ุฃู ุชููู ุจูู 0 ู 100. ูููู ุฃู ุชููู 0 ููุนูุงุตุฑ ุงูุชู ูุง ุชุฑูุฏ ุฃู ุชุธูุฑ (ูุซู "No luck")

2. **ุงูุชุฑุชูุจ**: ุญูู `order` ูุญุฏุฏ ุชุฑุชูุจ ุงูุนูุงุตุฑ ูู ุงูุนุฌูุฉ (ูู ุงูุฃุตุบุฑ ููุฃูุจุฑ)

3. **ููุฏ ุงูุฎุตู**: ูููู ุฃู ูููู `null` ููุนูุงุตุฑ ุงูุชู ูุง ุชุญุชูู ุนูู ุฎุตู (ูุซู "Try Again")

4. **ุงูุณุฌูุงุช**: ูุชู ุญูุธ ูู ูุชูุฌุฉ ุชููุงุฆูุงู ูุน ูุนูููุงุช ุงููุณุชุฎุฏู

5. **ุงูุฅุญุตุงุฆูุงุช**: ูููู ููุฃุฏูู ูุชุงุจุนุฉ ุนุฏุฏ ุงููุฑุงุช ุงูุชู ูุงุฒ ุจูุง ูู ุนูุตุฑ

## ๐ ุณูุฑ ุงูุนูู ุงููุงูู

1. **ุงูุฃุฏูู**:
   - ุฅูุดุงุก ุนูุงุตุฑ ุงูุนุฌูุฉ ูุน ุชุญุฏูุฏ ูุณุจุฉ ุงูุญุธ ููู ุนูุตุฑ
   - ุชูุนูู/ุชุนุทูู ุงูุนูุงุตุฑ
   - ูุชุงุจุนุฉ ุงูุณุฌูุงุช ูุงูุฅุญุตุงุฆูุงุช

2. **ุงููุณุชุฎุฏู**:
   - ุฅุฏุฎุงู ุงูุงุณู ูุฑูู ุงููุงุชู
   - ุงูุถุบุท ุนูู ุฒุฑ ุงูุฏูุฑุงู
   - ุงูุชุธุงุฑ ุงููุชูุฌุฉ ูู ุงูู Backend
   - ุนุฑุถ ุงููุชูุฌุฉ (ุงููุต + ููุฏ ุงูุฎุตู)
   - ูุณุฎ ููุฏ ุงูุฎุตู ูุงุณุชุฎุฏุงูู

## ๐ ุงูุชุซุจูุช

### 1. ุชุดุบูู Migrations

```bash
php artisan migrate
```

### 2. ุฅูุดุงุก ุนูุงุตุฑ ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)

ููููู ุฅูุดุงุก ุนูุงุตุฑ ุชุฌุฑูุจูุฉ ูู ููุญุฉ ุชุญูู ุงูุฃุฏูู ุฃู ูุจุงุดุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

### 3. ุฅุนุฏุงุฏ Frontend

- ุฅุถุงูุฉ API endpoints ูู `lib/api.ts`
- ุฅูุดุงุก ูููู SpinWheel
- ุฅุถุงูุฉ ุงูุตูุญุฉ ูู ููุญุฉ ุชุญูู ุงูุฃุฏูู

## ๐ ุงููููุงุช ุงููููุฉ

### Backend

- `database/migrations/2025_11_09_164305_create_spin_wheel_items_table.php`
- `database/migrations/2025_11_09_164306_create_spin_wheel_results_table.php`
- `app/Models/SpinWheelItem.php`
- `app/Models/SpinWheelResult.php`
- `app/Services/SpinWheelService.php`
- `app/Http/Controllers/Api/Admin/AdminSpinWheelController.php`
- `app/Http/Controllers/Api/Customer/SpinWheelController.php`
- `routes/api.php` (ุชู ุฅุถุงูุฉ Routes)

### Frontend (ุณูุชู ุฅูุดุงุคูุง)

- `front-end/src/pages/admin/AdminSpinWheel.tsx` - ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนูุงุตุฑ
- `front-end/src/components/SpinWheel.tsx` - ูููู ุงูุนุฌูุฉ ูููุณุชุฎุฏููู
- `front-end/src/lib/api.ts` - API functions

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดุงูู ุงูุดุงุฆุนุฉ

1. **ูุง ุชูุฌุฏ ุนูุงุตุฑ ูุดุทุฉ**: ุชุฃูุฏ ูู ุฅูุดุงุก ุนูุงุตุฑ ูุน `is_active = true`
2. **ุงููุชูุฌุฉ ุฏุงุฆูุงู ููุณูุง**: ุชุญูู ูู ูุณุจุฉ ุงูุญุธ - ูุฌุจ ุฃู ุชููู ูุฎุชููุฉ ููู ุนูุตุฑ
3. **ุฎุทุฃ ูู API**: ุชุญูู ูู ุงูู Routes ูุงูู Middleware

## ๐ ุงูุฏุนู

ูููุฒูุฏ ูู ุงููุนูููุงุช ุฃู ุงููุณุงุนุฏุฉุ ุฑุงุฌุน:
- ูููุงุช ุงูู Controllers ููุชูุงุตูู ุงูุชูููุฉ
- ูููุงุช ุงูู Models ููุนูุงูุงุช ูุงูู Scopes
- ููู `SpinWheelService.php` ูููุทู ุงูู spin

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-11-09

