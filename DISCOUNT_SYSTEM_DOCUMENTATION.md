# ูุธุงู ุงูุฎุตููุงุช ูุฃููุงุฏ ุงูุฎุตู - Soapy Shop

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฎุตููุงุช ูุชูุงูู ูุชูุญ ุฅุฏุงุฑุฉ ุฃููุงุฏ ุงูุฎุตู ุจูุฑููุฉ ุนุงููุฉ ูุน ุชุชุจุน ุงูุงุณุชุฎุฏุงู ูุงูุฅุญุตุงุฆูุงุช ุงูููุตูุฉ.

## ๐๏ธ ูููู ุงููุธุงู

### ุงูุฌุฏุงูู

#### 1. ุฌุฏูู ุฃููุงุฏ ุงูุฎุตู (`discount_codes`)

```sql
- id: ูุนุฑู ูุฑูุฏ
- code: ููุฏ ุงูุฎุตู (ูุฑูุฏ)
- name: ุงุณู ููุฏ ุงูุฎุตู
- description: ูุตู ููุฏ ุงูุฎุตู
- type: ููุน ุงูุฎุตู (percentage, fixed_amount, free_shipping)
- value: ูููุฉ ุงูุฎุตู
- minimum_order_amount: ุงูุญุฏ ุงูุฃุฏูู ููุทูุจ
- maximum_discount_amount: ุงูุญุฏ ุงูุฃูุตู ููุฎุตู
- usage_limit: ุญุฏ ุงูุงุณุชุฎุฏุงู ุงูุฅุฌูุงูู
- usage_count: ุนุฏุฏ ูุฑุงุช ุงูุงุณุชุฎุฏุงู ุงูุญุงูู
- usage_limit_per_customer: ุญุฏ ุงูุงุณุชุฎุฏุงู ููู ุนููู
- is_active: ุญุงูุฉ ุงูุชูุนูู
- starts_at: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- expires_at: ุชุงุฑูุฎ ุงูุงูุชูุงุก
- applicable_categories: ุงููุฆุงุช ุงูููุทุจูุฉ
- applicable_products: ุงูููุชุฌุงุช ุงูููุทุจูุฉ
- applicable_customers: ุงูุนููุงุก ุงูููุทุจููู
- first_time_customer_only: ููุนููุงุก ุงูุฌุฏุฏ ููุท
- new_customer_only: ููุนููุงุก ุงูุฌุฏุฏ ููุท
- admin_notes: ููุงุญุธุงุช ุงููุฏูุฑ
```

#### 2. ุฌุฏูู ุงุณุชุฎุฏุงู ุฃููุงุฏ ุงูุฎุตู (`discount_code_usage`)

```sql
- id: ูุนุฑู ูุฑูุฏ
- discount_code_id: ูุนุฑู ููุฏ ุงูุฎุตู
- order_id: ูุนุฑู ุงูุทูุจ
- customer_id: ูุนุฑู ุงูุนููู
- discount_amount: ูุจูุบ ุงูุฎุตู
- order_amount_before_discount: ูุจูุบ ุงูุทูุจ ูุจู ุงูุฎุตู
- order_amount_after_discount: ูุจูุบ ุงูุทูุจ ุจุนุฏ ุงูุฎุตู
- customer_phone: ุฑูู ูุงุชู ุงูุนููู
- customer_email: ุจุฑูุฏ ุงูุนููู ุงูุฅููุชุฑููู
- used_at: ุชุงุฑูุฎ ุงูุงุณุชุฎุฏุงู
```

## ๐ฏ ุฃููุงุน ุงูุฎุตููุงุช

### 1. ุฎุตู ูุณุจุฉ ูุฆููุฉ (Percentage)
- **ุงููููุฉ**: ูุณุจุฉ ูุฆููุฉ (0-100)
- **ุงููุซุงู**: ุฎุตู 20% ุนูู ุงูุทูุจ
- **ุงูุญุฏ ุงูุฃูุตู**: ูููู ุชุญุฏูุฏ ุญุฏ ุฃูุตู ููุจูุบ ุงูุฎุตู

### 2. ุฎุตู ูุจูุบ ุซุงุจุช (Fixed Amount)
- **ุงููููุฉ**: ูุจูุบ ุซุงุจุช ุจุงูุฏููุงุฑ ุงููููุชู
- **ุงููุซุงู**: ุฎุตู 15 ุฏ.ู ูู ุงูุทูุจ
- **ุงูุญุฏ ุงูุฃูุตู**: ูุง ูููู ุฃู ูุชุฌุงูุฒ ูุจูุบ ุงูุทูุจ

### 3. ุดุญู ูุฌุงูู (Free Shipping)
- **ุงููููุฉ**: 0 (ูุชู ุงูุชุนุงูู ูุนู ุจุดูู ูููุตู)
- **ุงููุซุงู**: ุดุญู ูุฌุงูู ุนูู ุงูุทูุจุงุช
- **ุงูุดุฑูุท**: ูููู ุชุญุฏูุฏ ุญุฏ ุฃุฏูู ููุทูุจ

## ๐ง ุงูููุฒุงุช ุงููุชูุฏูุฉ

### ุดุฑูุท ุงูุชุทุจูู

1. **ุงูุญุฏ ุงูุฃุฏูู ููุทูุจ**: ูุจูุบ ุฃุฏูู ูุทููุจ ูุชุทุจูู ุงูุฎุตู
2. **ุงููุฆุงุช ุงููุญุฏุฏุฉ**: ุชุทุจูู ุงูุฎุตู ุนูู ูุฆุงุช ูุนููุฉ ููุท
3. **ุงูููุชุฌุงุช ุงููุญุฏุฏุฉ**: ุชุทุจูู ุงูุฎุตู ุนูู ููุชุฌุงุช ูุนููุฉ ููุท
4. **ุงูุนููุงุก ุงููุญุฏุฏูู**: ุชุทุจูู ุงูุฎุตู ุนูู ุนููุงุก ูุนูููู ููุท
5. **ุงูุนููุงุก ุงูุฌุฏุฏ ููุท**: ุชุทุจูู ุงูุฎุตู ุนูู ุงูุนููุงุก ุงูุฌุฏุฏ ููุท
6. **ุงูุนููุงุก ูุฃูู ูุฑุฉ**: ุชุทุจูู ุงูุฎุตู ุนูู ุงูุนููุงุก ูุฃูู ูุฑุฉ ููุท

### ุญุฏูุฏ ุงูุงุณุชุฎุฏุงู

1. **ุงูุญุฏ ุงูุฅุฌูุงูู**: ุนุฏุฏ ูุฑุงุช ุงูุงุณุชุฎุฏุงู ุงูุฅุฌูุงูู
2. **ุงูุญุฏ ููู ุนููู**: ุนุฏุฏ ูุฑุงุช ุงูุงุณุชุฎุฏุงู ููู ุนููู
3. **ุชุชุจุน ุงูุงุณุชุฎุฏุงู**: ุชุณุฌูู ูู ุงุณุชุฎุฏุงู ูุน ุงูุชูุงุตูู

### ูุชุฑุงุช ุงูุตูุงุญูุฉ

1. **ุชุงุฑูุฎ ุงูุจุฏุงูุฉ**: ูุชู ูุตุจุญ ุงูููุฏ ูุนุงูุงู
2. **ุชุงุฑูุฎ ุงูุงูุชูุงุก**: ูุชู ููุชูู ุงูููุฏ
3. **ุงูุชูุนูู ุงููุฏูู**: ุฅููุงููุฉ ุชูุนูู/ุฅูุบุงุก ุชูุนูู ุงูููุฏ

## ๐ก APIs ุงููุชุงุญุฉ

### APIs ุงูุนููุงุก

#### 1. ุฌูุจ ุฃููุงุฏ ุงูุฎุตู ุงููุชุงุญุฉ
```http
GET /api/v1/discount-codes
```

**ุงููุนุงููุงุช:**
- `type`: ููุน ุงูุฎุตู (percentage, fixed_amount, free_shipping)
- `limit`: ุนุฏุฏ ุงููุชุงุฆุฌ (ุงูุชุฑุงุถู: 10)

#### 2. ุชูุงุตูู ููุฏ ุฎุตู ูุญุฏุฏ
```http
GET /api/v1/discount-codes/{code}
```

#### 3. ุงูุชุญูู ูู ุตุญุฉ ููุฏ ุงูุฎุตู
```http
POST /api/v1/discount-codes/validate
```

**ุงููุนุงููุงุช:**
```json
{
    "code": "WELCOME10",
    "items": [
        {
            "product_id": 1,
            "quantity": 2
        }
    ],
    "customer_phone": "+96512345678"
}
```

### APIs ุงููุฏูุฑ

#### 1. ุฅุฏุงุฑุฉ ุฃููุงุฏ ุงูุฎุตู
```http
GET /api/v1/admin/discount-codes
POST /api/v1/admin/discount-codes
GET /api/v1/admin/discount-codes/{id}
PUT /api/v1/admin/discount-codes/{id}
DELETE /api/v1/admin/discount-codes/{id}
```

#### 2. ุฅุญุตุงุฆูุงุช ุฃููุงุฏ ุงูุฎุตู
```http
GET /api/v1/admin/discount-codes/statistics
```

#### 3. ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูููุฏ
```http
PUT /api/v1/admin/discount-codes/{id}/toggle-status
```

#### 4. ุชุงุฑูุฎ ุงูุงุณุชุฎุฏุงู
```http
GET /api/v1/admin/discount-codes/{id}/usage-history
```

#### 5. ูุณุฎ ููุฏ ุฎุตู
```http
POST /api/v1/admin/discount-codes/{id}/duplicate
```

## ๐๏ธ ุฃูุงูุฑ Artisan

### ุฅุฏุงุฑุฉ ุฃููุงุฏ ุงูุฎุตู
```bash
php artisan app:discount-code-management {action}
```

**ุงูุฃูุนุงู ุงููุชุงุญุฉ:**
- `list`: ุนุฑุถ ูุงุฆูุฉ ุฃููุงุฏ ุงูุฎุตู
- `create`: ุฅูุดุงุก ููุฏ ุฎุตู ุฌุฏูุฏ
- `stats`: ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
- `cleanup`: ุชูุธูู ุงูุฃููุงุฏ ุงูููุชููุฉ
- `test`: ุงุฎุชุจุงุฑ ููุฏ ุฎุตู

**ุฃูุซูุฉ:**
```bash
# ุนุฑุถ ูุงุฆูุฉ ุงูุฃููุงุฏ
php artisan app:discount-code-management list

# ุฅูุดุงุก ููุฏ ุฎุตู ุฌุฏูุฏ
php artisan app:discount-code-management create --code=SAVE15 --name="ููุฑ 15%" --type=percentage --value=15

# ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
php artisan app:discount-code-management stats

# ุงุฎุชุจุงุฑ ููุฏ ุฎุตู
php artisan app:discount-code-management test --code=WELCOME10
```

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ

### ุฅุญุตุงุฆูุงุช ุนุงูุฉ
- ุฅุฌูุงูู ุฃููุงุฏ ุงูุฎุตู
- ุงูุฃููุงุฏ ุงููุดุทุฉ
- ุงูุฃููุงุฏ ุงูููุชููุฉ
- ุงูุฃููุงุฏ ุงููุณุชุฎุฏูุฉ

### ุฅุญุตุงุฆูุงุช ุงููุชุฑุฉ
- ุฅุฌูุงูู ุงูุงุณุชุฎุฏุงู
- ุฅุฌูุงูู ูุจูุบ ุงูุฎุตู
- ูุชูุณุท ุงูุฎุตู ููู ุงุณุชุฎุฏุงู

### ุชูุงุฑูุฑ ููุตูุฉ
- ุฃูุซุฑ ุงูุฃููุงุฏ ุงุณุชุฎุฏุงูุงู
- ุงูุงุณุชุฎุฏุงู ุญุณุจ ุงูููุน
- ุชุงุฑูุฎ ุงูุงุณุชุฎุฏุงู
- ุฃุฏุงุก ุงูุฃููุงุฏ

## ๐ ุงูุฃูุงู ูุงูุชุญูู

### ุงูุชุญูู ูู ุตุญุฉ ุงูููุฏ
1. **ูุฌูุฏ ุงูููุฏ**: ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงูููุฏ
2. **ุญุงูุฉ ุงูุชูุนูู**: ุงูุชุฃูุฏ ูู ุฃู ุงูููุฏ ูุดุท
3. **ูุชุฑุฉ ุงูุตูุงุญูุฉ**: ุงูุชุฃูุฏ ูู ุฃู ุงูููุฏ ูู ููุชู
4. **ุญุฏ ุงูุงุณุชุฎุฏุงู**: ุงูุชุฃูุฏ ูู ุนุฏู ุชุฌุงูุฒ ุงูุญุฏ
5. **ุดุฑูุท ุงูุนููู**: ุงูุชุญูู ูู ุฃูููุฉ ุงูุนููู
6. **ุดุฑูุท ุงูููุชุฌ**: ุงูุชุญูู ูู ุชุทุจูู ุงูููุฏ ุนูู ุงูููุชุฌุงุช
7. **ุงูุญุฏ ุงูุฃุฏูู ููุทูุจ**: ุงูุชุญูู ูู ุงูุญุฏ ุงูุฃุฏูู

### ุชุชุจุน ุงูุงุณุชุฎุฏุงู
- ุชุณุฌูู ูู ุงุณุชุฎุฏุงู
- ุฑุจุท ุงูุงุณุชุฎุฏุงู ุจุงูุทูุจ ูุงูุนููู
- ุชุชุจุน ูุจูุบ ุงูุฎุตู
- ุชุณุฌูู ุงูุชุงุฑูุฎ ูุงูููุช

## ๐จ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฅูุดุงุก ููุฏ ุฎุตู ุชุฑุญูุจู
```php
$discountCode = DiscountCode::createPercentageDiscount(
    'WELCOME10',
    'ุฎุตู ุชุฑุญูุจู 10%',
    10,
    [
        'minimum_order_amount' => 50,
        'maximum_discount_amount' => 25,
        'usage_limit' => 100,
        'first_time_customer_only' => true,
        'expires_at' => now()->addDays(30),
    ]
);
```

### ุฅูุดุงุก ููุฏ ุฎุตู ูุจูุบ ุซุงุจุช
```php
$discountCode = DiscountCode::createFixedAmountDiscount(
    'SAVE15KWD',
    'ููุฑ 15 ุฏ.ู',
    15,
    [
        'minimum_order_amount' => 75,
        'usage_limit' => 30,
        'expires_at' => now()->addDays(20),
    ]
);
```

### ุฅูุดุงุก ููุฏ ุดุญู ูุฌุงูู
```php
$discountCode = DiscountCode::createFreeShippingDiscount(
    'FREESHIP',
    'ุดุญู ูุฌุงูู',
    [
        'minimum_order_amount' => 25,
        'usage_limit' => 200,
        'expires_at' => now()->addDays(45),
    ]
);
```

### ุงูุชุญูู ูู ุตุญุฉ ุงูููุฏ
```php
$result = $discountService->validateAndApplyDiscountCode(
    'WELCOME10',
    [
        'items' => [
            ['product_id' => 1, 'quantity' => 2],
            ['product_id' => 2, 'quantity' => 1],
        ],
        'customer_phone' => '+96512345678'
    ],
    $customer
);

if ($result['success']) {
    $discountAmount = $result['discount_amount'];
    $finalAmount = $result['order_amount_after_discount'];
}
```

## ๐ ุงูุชุทููุฑ ุงููุณุชูุจูู

### ููุฒุงุช ูุฎุทุทุฉ
1. **ุฃููุงุฏ ุงูุฎุตู ุงูุชููุงุฆูุฉ**: ุฅูุดุงุก ุฃููุงุฏ ุชููุงุฆูุงู ุจูุงุกู ุนูู ุดุฑูุท ูุนููุฉ
2. **ุฎุตููุงุช ูุชุฏุฑุฌุฉ**: ุฎุตููุงุช ุชุฒุฏุงุฏ ูุน ุฒูุงุฏุฉ ูุจูุบ ุงูุทูุจ
3. **ุฎุตููุงุช ูุฌูุนุฉ**: ุฅููุงููุฉ ุงุณุชุฎุฏุงู ุนุฏุฉ ุฃููุงุฏ ุฎุตู ูุนุงู
4. **ุฎุตููุงุช ููุณููุฉ**: ุฎุตููุงุช ุชุธูุฑ ูู ุฃููุงุช ูุนููุฉ
5. **ุฎุตููุงุช ุดุฎุตูุฉ**: ุฎุตููุงุช ูุฎุตุตุฉ ููู ุนููู
6. **ุฅุดุนุงุฑุงุช ุงูุฎุตู**: ุฅุดุนุงุฑุงุช ุงูุนููุงุก ุจุฃููุงุฏ ุงูุฎุตู ุงููุชุงุญุฉ
7. **ุชุญูููุงุช ูุชูุฏูุฉ**: ุชุญูููุงุช ููุตูุฉ ูุฃุฏุงุก ุฃููุงุฏ ุงูุฎุตู

### ุชุญุณููุงุช ุงูุฃุฏุงุก
1. **ููุฑุณุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ุชุญุณูู ููุฑุณุฉ ุงูุฌุฏุงูู
2. **ุชุฎุฒูู ูุคูุช**: ุชุฎุฒูู ูุคูุช ููููุฏุงุช ุงููุณุชุฎุฏูุฉ ุจูุซุฑุฉ
3. **ุชุญุณูู ุงูุงุณุชุนูุงูุงุช**: ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ูุนุงูุฌุฉ ูุชูุงุฒูุฉ**: ูุนุงูุฌุฉ ูุชูุงุฒูุฉ ููุฎุตููุงุช ุงููุจูุฑุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู**: ุฌููุน ุงูุนูููุงุช ูุญููุฉ ุจูุตุงุฏูุฉ ุงููุฏูุฑ
2. **ุงูุชุญูู**: ุงูุชุญูู ุงูุดุงูู ูู ุตุญุฉ ุงูุจูุงูุงุช
3. **ุงูุณุฌูุงุช**: ุชุณุฌูู ููุตู ูุฌููุน ุงูุนูููุงุช
4. **ุงูุฃุฏุงุก**: ุชุญุณูู ุงูุฃุฏุงุก ููุนูููุงุช ุงููุจูุฑุฉ
5. **ุงููุฑููุฉ**: ุฅููุงููุฉ ุชุฎุตูุต ุงููุธุงู ุญุณุจ ุงูุญุงุฌุฉ

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ
1. **ููุฏ ุบูุฑ ุตุญูุญ**: ุงูุชุญูู ูู ุตุญุฉ ุงูููุฏ
2. **ููุฏ ููุชูู**: ุงูุชุญูู ูู ุชุงุฑูุฎ ุงูุงูุชูุงุก
3. **ุญุฏ ุงูุงุณุชุฎุฏุงู**: ุงูุชุญูู ูู ุญุฏูุฏ ุงูุงุณุชุฎุฏุงู
4. **ุดุฑูุท ุงูุนููู**: ุงูุชุญูู ูู ุฃูููุฉ ุงูุนููู
5. **ุดุฑูุท ุงูููุชุฌ**: ุงูุชุญูู ูู ุชุทุจูู ุงูููุฏ ุนูู ุงูููุชุฌุงุช

### ุญููู
1. **ูุญุต ุงูุณุฌูุงุช**: ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงููุธุงู
2. **ุงุฎุชุจุงุฑ ุงูููุฏ**: ุงุณุชุฎุฏุงู ุฃูุฑ ุงูุงุฎุชุจุงุฑ
3. **ุงูุชุญูู ูู ุงูุจูุงูุงุช**: ูุญุต ุจูุงูุงุช ุงูููุฏ
4. **ูุฑุงุฌุนุฉ ุงูุดุฑูุท**: ุงูุชุฃูุฏ ูู ุตุญุฉ ุงูุดุฑูุท
5. **ุงุฎุชุจุงุฑ ุงูุชูุงูู**: ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน ุงููุธุงู

---

**ุชู ุชุทููุฑ ูุธุงู ุงูุฎุตููุงุช ุจูุงุณุทุฉ ูุฑูู Soapy Shop** ๐งผโจ
