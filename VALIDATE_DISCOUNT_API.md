# ๐ซ API ุงูุชุญูู ูู ุตุญุฉ ููุฏ ุงูุฎุตู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง API ูุณูุญ ููุนููุงุก ุจุงูุชุญูู ูู ุตุญุฉ ููุฏ ุงูุฎุตู ูุจู ุฅูุดุงุก ุงูุทูุจ. ูููุฑ ูุนูููุงุช ููุตูุฉ ุนู ุงูููุฏ ูุงููุจูุบ ุงููุญุณูุจ ุจุนุฏ ุชุทุจูู ุงูุฎุตู.

## ๐ Endpoint

```http
POST /api/v1/checkout/validate-discount
```

## ๐ ุงููุนุงููุงุช ุงููุทููุจุฉ

| ุงููุนุงูู | ุงูููุน | ูุทููุจ | ุงููุตู |
|---------|-------|--------|--------|
| `discount_code` | string | โ | ููุฏ ุงูุฎุตู ุงููุฑุงุฏ ุงูุชุญูู ููู |
| `items` | array | โ | ูุงุฆูุฉ ุงูููุชุฌุงุช ูู ุงูุทูุจ |
| `items[].product_id` | integer | โ | ูุนุฑู ุงูููุชุฌ |
| `items[].quantity` | integer | โ | ุงููููุฉ (1-10) |
| `customer_phone` | string | โ | ุฑูู ูุงุชู ุงูุนููู (ููุชุญูู ูู ุดุฑูุท ุงูุนููู) |
| `shipping_amount` | number | โ | ูุจูุบ ุงูุดุญู (ุงูุชุฑุงุถู: 0) |

## ๐ค ูุซุงู ุงูุทูุจ

```bash
curl -X POST "http://localhost:8000/api/v1/checkout/validate-discount" \
  -H "Content-Type: application/json" \
  -d '{
    "discount_code": "SAVE20",
    "items": [
      {
        "product_id": 1,
        "quantity": 3
      }
    ],
    "customer_phone": "+96512345678",
    "shipping_amount": 5
  }'
```

## ๐ฅ ูุซุงู ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ

```json
{
  "success": true,
  "data": {
    "discount_code": {
      "code": "SAVE20",
      "name": "ููุฑ 20%",
      "description": "ุฎุตู 20% ุนูู ุฌููุน ุงูููุชุฌุงุช",
      "type": "percentage",
      "value": "20.000",
      "minimum_order_amount": "100.000",
      "maximum_discount_amount": "50.000",
      "expires_at": "2025-10-18T06:22:35.000000Z",
      "usage_count": 1,
      "usage_limit": 50,
      "remaining_usage": 49
    },
    "order_summary": {
      "subtotal_amount": 127.5,
      "discount_amount": 25.5,
      "shipping_amount": 5,
      "total_amount": 107,
      "currency": "KWD",
      "free_shipping": false
    },
    "items": [
      {
        "product": {
          "id": 1,
          "title": "ูุฑูู ูุฑุทุจ ูููุฌู ุจููุชุงููู C",
          "price": "25.500",
          "currency": "KWD"
        },
        "quantity": 3,
        "item_total": 76.5
      }
    ]
  },
  "message": "ููุฏ ุงูุฎุตู ุตุงูุญ ููููู ุงุณุชุฎุฏุงูู"
}
```

## โ ูุซุงู ุงูุงุณุชุฌุงุจุฉ ุงููุงุดูุฉ

```json
{
  "success": false,
  "message": "ุงูุญุฏ ุงูุฃุฏูู ููุทูุจ ูู 100.000 ุฏ.ู",
  "error_code": "MINIMUM_ORDER_NOT_MET"
}
```

## ๐ ุฃููุงุฏ ุงูุฃุฎุทุงุก

| ุงูููุฏ | ุงููุนูู | ุงููุตู |
|-------|--------|--------|
| `CODE_NOT_FOUND` | ููุฏ ุบูุฑ ููุฌูุฏ | ููุฏ ุงูุฎุตู ุบูุฑ ููุฌูุฏ ูู ุงููุธุงู |
| `CODE_INACTIVE` | ููุฏ ุบูุฑ ูุดุท | ููุฏ ุงูุฎุตู ุบูุฑ ููุนู |
| `CODE_EXPIRED` | ููุฏ ููุชูู | ููุฏ ุงูุฎุตู ููุชูู ุงูุตูุงุญูุฉ |
| `USAGE_LIMIT_REACHED` | ูุตู ููุญุฏ ุงูุฃูุตู | ุชู ุงุณุชุฎุฏุงู ุงูููุฏ ุจุงููุงูู |
| `MINIMUM_ORDER_NOT_MET` | ูู ูุตู ููุญุฏ ุงูุฃุฏูู | ูุจูุบ ุงูุทูุจ ุฃูู ูู ุงููุทููุจ |
| `CUSTOMER_NOT_ELIGIBLE` | ุงูุนููู ุบูุฑ ูุคูู | ุงูุนููู ูุง ููููู ุงุณุชุฎุฏุงู ุงูููุฏ |
| `FIRST_TIME_ONLY` | ููุนููุงุก ุงูุฌุฏุฏ ููุท | ุงูููุฏ ููุนููุงุก ุงูุฌุฏุฏ ููุท |
| `NEW_CUSTOMER_ONLY` | ููุนููุงุก ุงูุฌุฏุฏ ููุท | ุงูููุฏ ููุนููุงุก ุงูุฌุฏุฏ ููุท |

## ๐ฏ ุงูููุฒุงุช

### โ ุงูุชุญูู ุงูุดุงูู
- ุตุญุฉ ููุฏ ุงูุฎุตู
- ุชุงุฑูุฎ ุงูุตูุงุญูุฉ
- ุญุฏูุฏ ุงูุงุณุชุฎุฏุงู
- ุดุฑูุท ุงูุนููู
- ุงูุญุฏ ุงูุฃุฏูู ููุทูุจ

### ๐ ูุนูููุงุช ููุตูุฉ
- ุชูุงุตูู ููุฏ ุงูุฎุตู
- ููุฎุต ุงูุทูุจ ูุน ุงูุฎุตู
- ูุงุฆูุฉ ุงูููุชุฌุงุช
- ุญุณุงุจ ุฏููู ูููุจุงูุบ

### ๐ ุฏุนู ุฌููุน ุฃููุงุน ุงูุฎุตููุงุช
- **ูุณุจุฉ ูุฆููุฉ**: ุฎุตู ุจูุณุจุฉ ูู ุงููุฌููุน
- **ูุจูุบ ุซุงุจุช**: ุฎุตู ุจูุจูุบ ูุญุฏุฏ
- **ุดุญู ูุฌุงูู**: ุฅูุบุงุก ุฑุณูู ุงูุดุญู

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงูุชุญูู ูู ููุฏ ุฎุตู ุจุณูุท
```bash
curl -X POST "http://localhost:8000/api/v1/checkout/validate-discount" \
  -H "Content-Type: application/json" \
  -d '{
    "discount_code": "WELCOME10",
    "items": [{"product_id": 1, "quantity": 2}]
  }'
```

### 2. ุงูุชุญูู ูุน ูุนูููุงุช ุงูุนููู
```bash
curl -X POST "http://localhost:8000/api/v1/checkout/validate-discount" \
  -H "Content-Type: application/json" \
  -d '{
    "discount_code": "VIP30",
    "items": [{"product_id": 1, "quantity": 3}],
    "customer_phone": "+96512345678",
    "shipping_amount": 5
  }'
```

### 3. ุงูุชุญูู ูู ููุฏ ุดุญู ูุฌุงูู
```bash
curl -X POST "http://localhost:8000/api/v1/checkout/validate-discount" \
  -H "Content-Type: application/json" \
  -d '{
    "discount_code": "FREESHIP",
    "items": [{"product_id": 1, "quantity": 1}],
    "shipping_amount": 10
  }'
```

## ๐ง ุงูุชูุงูู ูุน APIs ุฃุฎุฑู

### ูุน ุญุณุงุจ ุงููุฌููุน
```bash
# 1. ุญุณุงุจ ุงููุฌููุน ุฃููุงู
TOTAL_RESPONSE=$(curl -s -X POST "http://localhost:8000/api/v1/checkout/calculate-total" \
  -H "Content-Type: application/json" \
  -d '{"items":[{"product_id":1,"quantity":3}]}')

# 2. ุงูุชุญูู ูู ููุฏ ุงูุฎุตู
DISCOUNT_RESPONSE=$(curl -s -X POST "http://localhost:8000/api/v1/checkout/validate-discount" \
  -H "Content-Type: application/json" \
  -d '{"discount_code":"SAVE20","items":[{"product_id":1,"quantity":3}]}')
```

### ูุน ุฅูุดุงุก ุงูุทูุจ
```bash
# 1. ุงูุชุญูู ูู ููุฏ ุงูุฎุตู
VALIDATE_RESPONSE=$(curl -s -X POST "http://localhost:8000/api/v1/checkout/validate-discount" \
  -H "Content-Type: application/json" \
  -d '{"discount_code":"SAVE20","items":[{"product_id":1,"quantity":3}]}')

# 2. ุฅูุดุงุก ุงูุทูุจ ูุน ููุฏ ุงูุฎุตู
ORDER_RESPONSE=$(curl -s -X POST "http://localhost:8000/api/v1/checkout/create-order" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_name": "ุฃุญูุฏ ูุญูุฏ",
    "customer_phone": "+96512345678",
    "shipping_address": {"street": "ุดุงุฑุน ุงูุฎููุฌ", "city": "ุงููููุช", "governorate": "ุงููููุช"},
    "items": [{"product_id": 1, "quantity": 3}],
    "discount_code": "SAVE20",
    "shipping_amount": 5
  }')
```

## ๐ ูุนุฏูุงุช ุงูุงุณุชุฎุฏุงู

### ุงูุญุฏูุฏ
- **ูุนุฏู ุงูุทูุจุงุช**: 1000 ุทูุจ/ุณุงุนุฉ ููู IP
- **ุญุฌู ุงูุทูุจ**: 10MB ูุญุฏ ุฃูุตู
- **ูููุฉ ุงูุงุณุชุฌุงุจุฉ**: 30 ุซุงููุฉ

### ุงูุฃุฏุงุก
- **ูุชูุณุท ุงูุงุณุชุฌุงุจุฉ**: < 500ms
- **ุงูุชุญูู ูู ุงูููุฏ**: < 200ms
- **ุญุณุงุจ ุงููุจุงูุบ**: < 100ms

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก ุดุงุฆุนุฉ
1. **ุฎุทุฃ ุงูุชุญูู ูู ุงูุจูุงูุงุช**
   - ุชุฃูุฏ ูู ุฅุฑุณุงู ุฌููุน ุงูุญููู ุงููุทููุจุฉ
   - ุชุญูู ูู ุตุญุฉ ูุนุฑูุงุช ุงูููุชุฌุงุช

2. **ุฎุทุฃ ููุฏ ุงูุฎุตู**
   - ุชุฃูุฏ ูู ุตุญุฉ ุงูููุฏ
   - ุชุญูู ูู ุฃู ุงูููุฏ ูุดุท ูุบูุฑ ููุชูู

3. **ุฎุทุฃ ุงูุญุฏ ุงูุฃุฏูู**
   - ุฒุฏ ูููุฉ ุงูููุชุฌุงุช ุฃู ุฃุถู ููุชุฌุงุช ุฃุฎุฑู
   - ุชุญูู ูู ุงูุญุฏ ุงูุฃุฏูู ุงููุทููุจ

## ๐ ุงูุฏุนู

### ูููุณุงุนุฏุฉ
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: support@soapyshop.com
- **ุงููุงุชู**: +965 1234 5678
- **ุณุงุนุงุช ุงูุนูู**: 9:00 ุต - 6:00 ู (ุจุชูููุช ุงููููุช)

---

**ุชู ุชุทููุฑ API ุงูุชุญูู ูู ุตุญุฉ ููุฏ ุงูุฎุตู ุจูุงุณุทุฉ ูุฑูู Soapy Shop** ๐งผโจ

*ุขุฎุฑ ุชุญุฏูุซ: 3 ุฃูุชูุจุฑ 2025*

